#!/usr/bin/python
#
# Copyright (c) 2010 The Ginsu Project Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

""" Build file for tests of c_salt code
"""

import os
import sys

Import('env')

sel_ldr = os.path.join(env['NACL_TOOLCHAIN_ROOT'], 'bin', 'sel_ldr')
if not os.path.exists(sel_ldr):
  sys.stderr.write('sel_ldr is not installed as part of the NaCl toolchain.\n')
  sys.exit(1)

small_test_inputs = ['c_salt_test_module.cc',
                     'callback_test.cc',
                     'npapi/variant_converter_test.cc',
                     'variant_test.cc',
                    ]

env.ComponentTestProgram(
    'small_c_salt_test',
    small_test_inputs,
    COMPONENT_TEST_CMDLINE = '%s $PROGRAM_NAME' % sel_ldr,
    COMPONENT_TEST_SIZE = 'small'
)
